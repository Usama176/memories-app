(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{105:function(e,t,n){},124:function(e,t,n){},125:function(e,t,n){},126:function(e,t,n){"use strict";n.r(t);var c=n(0),a=n.n(c),s=n(10),i=n.n(s),o=n(11),r=(n(88),n(4)),l=n(13),j=n(9),d=function(e,t){return"USER"==t.type?t.payload:"CLEAR"==t.type?null:"UPDATE"==t.type?Object(j.a)(Object(j.a)({},e),{},{followers:t.payload.followers,following:t.payload.following}):"UPDATEPROFILE"==t.type?Object(j.a)(Object(j.a)({},e),{},{pic:t.payload}):e},u=(n(89),n(12)),h=n.n(u),b=n(20),m=n(49),p=n.n(m),O=n(152),f=n(155),x=n(163),g=n(164),v=n(156),N=n(157),y=n(158),w=n(53),S=n.n(w),C=(n(61),n(8)),k=n.n(C),_=n(1),A=function(){var e=Object(c.useState)(null),t=Object(r.a)(e,2),n=t[0],a=t[1],s=function(e){a(e.currentTarget)},i=function(){a(null)},l=Object(c.useContext)(W),d=l.state,u=(l.dispatch,Object(c.useState)([])),m=Object(r.a)(u,2),w=m[0],C=m[1],A=Object(c.useState)(""),I=Object(r.a)(A,2),B=I[0],E=I[1],T=Object(c.useState)(""),z=Object(r.a)(T,2),F=z[0],P=z[1],J=Object(c.useState)(""),U=Object(r.a)(J,2),R=U[0],D=U[1];Object(c.useEffect)(Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/allpost",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e),C(e.posts)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),[]);var L=function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/".concat(n),{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=w.map((function(t){return t._id===e._id?Object(j.a)(Object(j.a)({},t),{},{likes:e.likes}):t}));C(t)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(_.jsx)("div",{className:"home-container",children:Object(_.jsx)("div",{className:"posts-container",children:w.map((function(e,t){return Object(_.jsxs)(O.a,{className:"post-card",children:[Object(_.jsxs)("div",{className:"post-card-header",children:[Object(_.jsx)(o.b,{to:e.postedBy._id!==d._id?"/profile/"+e.postedBy._id:"/profile",children:Object(_.jsxs)("div",{className:"user-info",children:[Object(_.jsx)("img",{src:e.postedBy.pic,className:"post-user-profile",alt:"profile"}),Object(_.jsxs)("h5",{children:[e.postedBy.name,Object(_.jsx)(f.a,{variant:"body2",color:"textSecondary",component:"p",children:Object(_.jsx)("span",{children:p()(e.createdAt).calendar()})})]})]})}),e.postedBy._id==d._id&&Object(_.jsxs)("div",{children:[Object(_.jsx)("i",{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:s,className:"bi bi-three-dots-vertical delete-button"}),Object(_.jsx)(x.a,{id:"simple-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:i,children:Object(_.jsx)(g.a,{onClick:i,children:Object(_.jsx)("i",{className:"bi bi-trash",onClick:function(){!function(e){fetch("/deletepost/".concat(e),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){var t=w.filter((function(t){return t._id!==e._id}));C(t)})).catch((function(e){console.log(e)}))}(e._id)}})})})]})]}),e.photo?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"post-card-info",children:[Object(_.jsx)("h5",{children:e.title}),Object(_.jsx)(f.a,{variant:"body2",color:"textSecondary",component:"h6",children:Object(_.jsx)("h6",{children:e.body})})]}),Object(_.jsx)(v.a,{children:Object(_.jsx)("img",{src:e.photo})})]}):Object(_.jsx)(v.a,{className:"post-card-without-img",children:Object(_.jsxs)("div",{children:[Object(_.jsx)("h5",{children:e.title}),Object(_.jsx)(f.a,{variant:"body2",color:"textSecondary",component:"h6",children:Object(_.jsx)("h6",{children:e.body})})]})}),Object(_.jsxs)(N.a,{children:[Object(_.jsx)(f.a,{variant:"body2",color:"textSecondary",component:"h6",children:Object(_.jsxs)("h6",{children:[e.likes.length+e.haha.length+e.angry.length," reacts"]})}),Object(_.jsxs)("div",{className:"card-icons",children:[Object(_.jsx)("div",{children:Object(_.jsx)("button",{onClick:function(){e.likes.includes(d._id)?L(e._id,"unlike"):L(e._id,"likes")},children:e.likes.includes(d._id)?Object(_.jsx)("i",{className:"bi bi-heart-fill icons heart-icon"}):Object(_.jsx)("i",{className:"bi bi-heart icons heart-icon"})})}),Object(_.jsx)("button",{onClick:function(){e._id==R?(P(""),D("")):(P("increase-height"),D(e._id)),e.comments.length<1&&k.a.toast({html:"No comments yet!",classes:"#f44336 blue"})},children:e._id==R?Object(_.jsx)("i",{className:"bi bi-chat-fill icons"}):Object(_.jsx)("i",{className:"bi bi-chat icons"})})]}),Object(_.jsx)("div",{className:"comments-container ".concat(e._id==R?F:null),children:e.comments.map((function(e){return console.log(e),Object(_.jsxs)("div",{className:"comment-container",children:[Object(_.jsx)("img",{src:e.postedBy.pic,className:"post-user-profile"}),Object(_.jsxs)("div",{className:"name-comment-container",children:[Object(_.jsx)(f.a,{variant:"body2",component:"p",children:Object(_.jsx)("p",{style:{fontWeight:"600"},children:e.postedBy.name})}),Object(_.jsx)("h6",{className:"comment",children:e.text})]})]},e._id)}))}),Object(_.jsxs)("div",{className:"add-comment-container",children:[Object(_.jsx)(y.a,{className:"add-comment-input","aria-label":"empty textarea",placeholder:"Add a comment",value:B,onChange:function(e){return E(e.target.value)}}),Object(_.jsx)(S.a,{className:"post-comment-button",onClick:function(){var t,n;B.length>0?(t=B,n=e._id,fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:n,text:t})}).then((function(e){return e.json()})).then((function(e){var t=w.map((function(t){return t._id==e._id?Object(j.a)(Object(j.a)({},t),{},{comments:e.comments}):t}));C(t),E("")})).catch((function(e){console.log(e)}))):k.a.toast({html:"Comment can't be blank",classes:"#f44336 blue"})}})]})]})]},t)}))})})},I=(n(64),function(){var e=Object(c.useContext)(W),t=(e.state,e.dispatch),n=Object(l.e)(),a=Object(c.useState)(""),s=Object(r.a)(a,2),i=s[0],j=s[1],d=Object(c.useState)(""),u=Object(r.a)(d,2),h=u[0],b=u[1];return Object(_.jsx)("div",{className:"main-signin",children:Object(_.jsxs)("div",{className:"container",children:[Object(_.jsx)("div",{className:"forms-container",children:Object(_.jsx)("div",{className:"signin-signup",children:Object(_.jsxs)("div",{className:"form",children:[Object(_.jsx)("h2",{className:"title",children:"Sign In"}),Object(_.jsx)("input",{onChange:function(e){return j(e.target.value)},className:"input-field",type:"email",placeholder:"Enter your email"}),Object(_.jsx)("input",{onChange:function(e){return b(e.target.value)},className:"input-field",type:"password",placeholder:"Enter your password"}),Object(_.jsx)("button",{onClick:function(){/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(i)?fetch("/signin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:i,password:h})}).then((function(e){return e.json()})).then((function(e){e.error?k.a.toast({html:e.error,classes:"#f44336 red"}):(localStorage.setItem("jwt",e.token),localStorage.setItem("user",JSON.stringify(e.user)),t({type:"USER",payload:e.user}),k.a.toast({html:"Signin Successfull",classes:"#66bb6a green lighten-1"}),n.push("/"))})).catch((function(e){console.log(e)})):k.a.toast({html:"Invalid Email",classes:"#f44336 red"})},className:"btn waves-effect waves-light",children:"Sign In"}),Object(_.jsx)("div",{className:"link-container",children:Object(_.jsxs)("p",{children:["Don't have an account? ",Object(_.jsx)("span",{children:Object(_.jsx)(o.b,{className:"link",to:"/signup",children:" Sign Up"})})]})})]})})}),Object(_.jsxs)("div",{className:"panels-container",children:[Object(_.jsxs)("div",{className:"panel left-panel",children:[Object(_.jsxs)("div",{className:"content signin-content",children:[Object(_.jsxs)("h4",{children:[Object(_.jsx)("span",{children:Object(_.jsx)("i",{className:"fas fa-quote-left"})})," A good life is a collection of happy Memories"]}),Object(_.jsx)("h6",{children:'"Now share your memories with the family of Memories app"'})]}),Object(_.jsx)("img",{src:"img/log.svg",className:"image",alt:""})]}),Object(_.jsxs)("div",{className:"panel right-panel",children:[Object(_.jsxs)("div",{className:"content",children:[Object(_.jsx)("h5",{children:"Hi! You are most welcome to the "}),Object(_.jsx)("h4",{children:"MEMORIES App"}),Object(_.jsx)("h6",{children:'"Now share your memories with the family of Memories app"'})]}),Object(_.jsx)("img",{src:"./img/images.png",className:"1ge",alt:""})]})]})]})})}),B=(n(105),function(){var e=Object(l.e)(),t=Object(c.useContext)(W),n=t.state,a=t.dispatch,s=Object(c.useRef)(null),i=Object(c.useState)(""),j=Object(r.a)(i,2),d=j[0],u=j[1],h=Object(c.useState)([]),b=Object(r.a)(h,2),m=b[0],p=b[1];Object(c.useEffect)((function(){k.a.Modal.init(s.current)}),[]);return Object(_.jsxs)("div",{className:"navbar-container",children:[Object(_.jsxs)("div",{className:"navbar",children:[Object(_.jsxs)("div",{className:"navbar-logo-container",children:[Object(_.jsx)(o.c,{className:"links logo",to:"/",children:"Memories"}),Object(_.jsxs)("div",{className:"search-logout-container",children:[Object(_.jsx)("i",{"data-target":"modal1",className:"bi bi-search modal-trigger search-logout-btn"}),Object(_.jsx)("i",{onClick:function(){return localStorage.clear(),a({type:"CLEAR"}),void e.push("/signin")},className:"bi bi-box-arrow-right search-logout-btn"})]})]}),Object(_.jsxs)("ul",{id:"navbar-ul",className:"navbar-ul",children:[Object(_.jsx)("li",{children:Object(_.jsx)(o.c,{exact:!0,activeClassName:"selected",className:"links",to:"/",children:Object(_.jsx)("i",{className:"bi bi-house nav-icons"})})}),Object(_.jsx)("li",{children:Object(_.jsx)(o.c,{exact:!0,activeClassName:"selected",className:"links",to:"/createpost",children:Object(_.jsx)("i",{className:"bi bi-plus-circle nav-icons"})})}),Object(_.jsx)("li",{children:Object(_.jsx)(o.c,{exact:!0,activeClassName:"selected",className:"links",to:"/followingsposts",children:Object(_.jsx)("i",{className:"bi bi-collection nav-icons"})})}),Object(_.jsx)("li",{children:Object(_.jsx)(o.c,{exact:!0,activeClassName:"selected",className:"links",to:"/users",children:Object(_.jsx)("i",{className:"bi bi-person-lines-fill nav-icons"})})}),Object(_.jsx)("li",{children:Object(_.jsx)(o.c,{to:"/profile",exact:!0,activeClassName:"selected",className:"links profile-link",children:Object(_.jsx)("img",{className:"nav-user-profile",src:n&&n.pic})})})]})]}),Object(_.jsxs)("div",{id:"modal1",class:"modal",ref:s,style:{color:"black"},children:[Object(_.jsxs)("div",{className:"modal-content",children:[Object(_.jsx)("input",{type:"text",placeholder:"Search users",value:d,onChange:function(e){return t=e.target.value,u(t),void fetch("/search-users",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({query:t})}).then((function(e){return e.json()})).then((function(e){p(e.user)}));var t}}),Object(_.jsx)("ul",{children:m.map((function(e){return Object(_.jsx)("div",{children:e._id==n._id?null:Object(_.jsx)(o.c,{to:"/profile/".concat(e._id),onClick:function(){k.a.Modal.getInstance(s.current).close(),u("")},children:Object(_.jsxs)("div",{className:"search-user-container",children:[Object(_.jsx)("img",{src:e.pic}),Object(_.jsxs)("li",{children:[e.name,Object(_.jsx)(f.a,{variant:"body2",color:"textSecondary",component:"p",children:Object(_.jsx)("span",{children:e.email})})]})]})})})}))})]}),Object(_.jsx)("div",{className:"modal-footer",children:Object(_.jsx)("button",{className:"modal-close waves-effect waves-green btn-flat",onClick:function(){return u("")},children:"close"})})]})]})}),E=n(35),T=n.n(E),z=n(161),F=n(159),P=n(160),J=(n(73),Object(F.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),function(){var e=Object(c.useContext)(W),t=e.state,n=e.dispatch,a=Object(c.useState)([]),s=Object(r.a)(a,2),i=s[0],o=s[1],l=Object(c.useState)(""),d=Object(r.a)(l,2),u=d[0],m=d[1],p=Object(c.useState)(""),O=Object(r.a)(p,2),x=O[0],g=O[1],v=Object(c.useState)(0),N=Object(r.a)(v,2),y=N[0],w=N[1];Object(c.useEffect)(Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/mypost",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){console.log(e),o(e.mypost),n({type:"UPDATE",payload:{followers:e.user.followers,following:e.user.following}})})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),[]);return Object(c.useEffect)((function(){x&&fetch("/updateprofile",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({pic:x})}).then((function(e){return e.json()})).then((function(e){e.error?k.a.toast({html:e.error,classes:"#c62828 red darken-3"}):(localStorage.setItem("user",JSON.stringify(Object(j.a)(Object(j.a)({},t),{},{pic:e.pic}))),n({type:"UPDATEPROFILE",payload:e.pic}))})).catch((function(e){console.log(e)}))}),[x]),Object(_.jsxs)("div",{className:F.a.root,children:[0==y||100==y?null:Object(_.jsx)(P.a,{variant:"determinate",value:y}),Object(_.jsxs)("div",{className:"profile",children:[Object(_.jsxs)("div",{className:"user-profile-container",children:[Object(_.jsx)("div",{className:"profile-img-container",children:Object(_.jsx)("img",{src:u||(t?t.pic:null),className:"profile-img",alt:"profile"})}),Object(_.jsxs)("div",{className:"user-info-container",children:[Object(_.jsx)("h2",{className:"user-name",children:t?t.name:"loading"}),Object(_.jsx)(f.a,{variant:"body2",color:"textSecondary",component:"h6",children:Object(_.jsx)("h6",{children:t?t.email:"loading"})}),Object(_.jsx)(f.a,{variant:"body2",color:"textSecondary",component:"h6",children:Object(_.jsxs)("div",{className:"user-info",children:[Object(_.jsxs)("h6",{children:[i?i.length:"Loading"," posts"]}),Object(_.jsxs)("h6",{children:[t?t.followers.length:"loading"," followers"]}),Object(_.jsxs)("h6",{children:[t?t.following.length:"loading"," following"]})]})}),Object(_.jsxs)("div",{className:"profile-img-update-btn-container",children:[Object(_.jsx)("input",{accept:"image/*",type:"file",id:"image-upload",onChange:function(e){return function(e){var t=new FileReader;t.onload=function(){2===t.readyState&&m(t.result)},t.readAsDataURL(e.target.files[0])}(e)}}),Object(_.jsx)("label",{htmlFor:"image-upload",children:Object(_.jsx)("div",{className:"upload-btn",children:Object(_.jsx)(z.a,{})})}),Object(_.jsx)("button",{onClick:function(){return function(){if(u){var e=new FormData;e.append("file",u),e.append("upload_preset","memorise-app"),e.append("cloud_name","usamaar41");var t={onUploadProgress:function(e){var t=e.loaded,n=e.total,c=Math.floor(100*t/n);c<100&&w(c)}};T.a.post("https://api.cloudinary.com/v1_1/usamaar41/image/upload",e,t).then((function(e){g(e.data.url)})).catch((function(e){console.log(e)}))}}()},className:"update-btn",children:"UPDATE PROFILE"})]})]})]}),Object(_.jsx)("div",{className:"user-gallery-container",children:i.map((function(e,t){return e.photo?Object(_.jsx)("img",{className:"gallery-img",src:e.photo,alt:e.title},e._id):null}))})]})]})}),U=n(162),R=(Object(F.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),function(){var e=Object(l.e)(),t=Object(c.useState)(""),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(""),j=Object(r.a)(i,2),d=j[0],u=j[1],h=Object(c.useState)(""),b=Object(r.a)(h,2),m=b[0],p=b[1],O=Object(c.useState)(""),f=Object(r.a)(O,2),x=f[0],g=f[1],v=Object(c.useState)(void 0),N=Object(r.a)(v,2),y=N[0],w=N[1],S=Object(c.useState)(0),C=Object(r.a)(S,2),A=C[0],I=C[1];return Object(c.useEffect)((function(){y&&fetch("/signup",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({name:a,email:d,password:m,pic:y})}).then((function(e){return e.json()})).then((function(t){t.error?k.a.toast({html:t.error,classes:"#c62828 red darken-3"}):(k.a.toast({html:"Post Created Successfully",classes:"#43a047 green darken-1"}),e.push("/signin"))})).catch((function(e){console.log(e)}))}),[y]),Object(_.jsxs)("div",{className:F.a.root,children:[A>0&&Object(_.jsx)(P.a,{variant:"determinate",value:A}),Object(_.jsx)("div",{className:"main",children:Object(_.jsxs)("div",{className:"container sign-up-mode",children:[Object(_.jsx)("div",{className:"forms-container",children:Object(_.jsx)("div",{className:"signin-signup",children:Object(_.jsxs)("div",{className:"form",children:[Object(_.jsxs)("div",{className:"img-and-upload-btn-container",children:[Object(_.jsx)("div",{className:"profile-img-container",children:Object(_.jsx)("img",{src:x.length>0?x:"https://res.cloudinary.com/usamaar41/image/upload/v1616780304/blank-profile_atbknn.png",className:"profile-img",alt:"profile"})}),Object(_.jsxs)("div",{children:[Object(_.jsx)("input",{accept:"image/*",type:"file",id:"image-upload",onChange:function(e){return function(e){var t=new FileReader;t.onload=function(){2===t.readyState&&g(t.result)},t.readAsDataURL(e.target.files[0])}(e)}}),Object(_.jsx)("label",{className:"img-upload-btn-container",htmlFor:"image-upload",children:Object(_.jsx)(U.a,{color:"primary","aria-label":"upload picture",component:"span",children:Object(_.jsx)(z.a,{className:"img-upload-btn"})})})]})]}),Object(_.jsx)("input",{type:"text",placeholder:"Your Good Name",className:"input-field",value:a,onChange:function(e){return s(e.target.value)}}),Object(_.jsx)("input",{type:"text",placeholder:"e.g johndoe@provider.com",className:"input-field",value:d,onChange:function(e){return u(e.target.value)}}),Object(_.jsx)("input",{type:"password",placeholder:"Set your password",className:"input-field",value:m,onChange:function(e){return p(e.target.value)}}),Object(_.jsx)("button",{disabled:A>0&&!0,onClick:function(){return function(){if(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(d))if(x){var t=new FormData;t.append("file",x),t.append("upload_preset","memorise-app"),t.append("cloud_name","usamaar41");var n={onUploadProgress:function(e){var t=e.loaded,n=e.total,c=Math.floor(100*t/n);console.log(c),c<100&&I(c)}};T.a.post("https://api.cloudinary.com/v1_1/usamaar41/image/upload",t,n).then((function(e){w(e.data.url)})).catch((function(e){console.log(e)}))}else{if(!/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(d))return void k.a.toast({html:"Invalid Email",classes:"#f44336 red"});fetch("/signup",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,email:d,password:m})}).then((function(e){return e.json()})).then((function(t){t.error?k.a.toast({html:t.error,classes:"#f44336 red"}):(k.a.toast({html:"Account created successfully",classes:"#66bb6a green lighten-1"}),e.push("/signin"))})).catch((function(e){console.log(e)}))}else k.a.toast({html:"Invalid Email",classes:"#f44336 red"})}()},className:"btn waves-effect waves-light",children:"Sign Up"}),Object(_.jsx)("div",{className:"link-container",children:Object(_.jsxs)("p",{children:["Already have an account? ",Object(_.jsx)("span",{children:Object(_.jsx)(o.b,{className:"link",exact:!0,to:"/signin",children:" Sign In"})})]})})]})})}),Object(_.jsxs)("div",{className:"panels-container",children:[Object(_.jsxs)("div",{className:"panel left-panel",children:[Object(_.jsxs)("div",{className:"content",children:[Object(_.jsx)("h3",{children:"New here ?"}),Object(_.jsx)("p",{children:"Lorem ipsum, dolor sit amet consectetur adipisicing elit. Debitis, ex ratione. Aliquid!"}),Object(_.jsx)("button",{className:"btn transparent",id:"sign-up-btn",children:"Sign up"})]}),Object(_.jsx)("img",{src:"img/log.svg",className:"image",alt:""})]}),Object(_.jsxs)("div",{className:"panel right-panel",children:[Object(_.jsxs)("div",{className:"content signup-content",children:[Object(_.jsxs)("h4",{children:[Object(_.jsx)("span",{children:Object(_.jsx)("i",{className:"fas fa-quote-left"})})," A good life is a collection of happy Memories"]}),Object(_.jsx)("h6",{children:'"Now share your memories with the family of Memories app"'})]}),Object(_.jsx)("img",{src:"./img/images.png",className:"1ge",alt:""})]})]})]})})]})}),D=(n(124),Object(F.a)((function(e){return{root:{width:"100%"}}})),function(){var e=Object(l.e)(),t=Object(c.useState)(""),n=Object(r.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(""),o=Object(r.a)(i,2),j=o[0],d=o[1],u=Object(c.useState)(""),h=Object(r.a)(u,2),b=h[0],m=h[1],p=Object(c.useState)(""),O=Object(r.a)(p,2),f=O[0],x=O[1],g=Object(c.useState)(0),v=Object(r.a)(g,2),N=v[0],y=v[1];return Object(c.useEffect)((function(){f&&fetch("/createpost",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({title:a,body:j,pic:f})}).then((function(e){return e.json()})).then((function(t){t.error?k.a.toast({html:t.error,classes:"#c62828 red darken-3"}):(k.a.toast({html:"Post Created Successfully",classes:"#43a047 green darken-1"}),e.push("/"))})).catch((function(e){console.log(e)}))}),[f]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("div",{className:F.a.root,children:N>0&&Object(_.jsx)(P.a,{variant:"determinate",value:N})}),Object(_.jsx)("div",{className:"create-post-container",children:Object(_.jsxs)("div",{className:"input-filed create-post-card",children:[Object(_.jsx)("h4",{children:"What's on your mind?"}),Object(_.jsx)("input",{type:"text",placeholder:"title of your post",value:a,onChange:function(e){return s(e.target.value)}}),Object(_.jsx)("input",{type:"text",placeholder:"say something about your post",value:j,onChange:function(e){return d(e.target.value)}}),Object(_.jsxs)("div",{className:"img-img-upload-btn-container",children:[Object(_.jsx)("img",{src:b||"https://res.cloudinary.com/usamaar41/image/upload/v1617188233/download_svoifd.png"}),Object(_.jsxs)("div",{className:"choose-img-btn-container",children:[Object(_.jsx)("input",{accept:"image/*",type:"file",id:"image-upload",onChange:function(e){return function(e){var t=new FileReader;t.onload=function(){2===t.readyState&&m(t.result)},t.readAsDataURL(e.target.files[0])}(e)}}),Object(_.jsx)("label",{htmlFor:"image-upload",className:"choose-img-btn-container",children:Object(_.jsxs)("div",{className:"choose-img-btn",children:[Object(_.jsx)(z.a,{}),Object(_.jsx)("p",{children:"Choose Photo"})]})})]})]}),Object(_.jsx)("button",{onClick:function(){return function(){if(b){var t=new FormData;t.append("file",b),t.append("upload_preset","memorise-app"),t.append("cloud_name","usamaar41");var n={onUploadProgress:function(e){var t=e.loaded,n=e.total,c=Math.floor(100*t/n);c<100&&y(c)}};T.a.post("https://api.cloudinary.com/v1_1/usamaar41/image/upload",t,n).then((function(e){x(e.data.url),y(100,(function(){setTimeout((function(){y(0)}),500)}))})).catch((function(e){console.log(e)}))}else fetch("/createpost",{method:"post",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({title:a,body:j})}).then((function(e){return e.json()})).then((function(t){t.error?k.a.toast({html:t.error,classes:"#f44336 red"}):(k.a.toast({html:"Post created successfully",classes:"#66bb6a green lighten-1"}),e.push("/"))})).catch((function(e){console.log(e)}))}()},className:"submit-post-btn",children:"Submit Post"})]})})]})}),L=n(78),M=(Object(F.a)((function(e){return{root:{width:"100%","& > * + *":{marginTop:e.spacing(2)}}}})),function(){var e=Object(l.g)().user_id,t=Object(c.useContext)(W),n=t.state,a=t.dispatch,s=Object(c.useState)(null),i=Object(r.a)(s,2),o=i[0],d=i[1],u=Object(c.useState)(!n||n.following.includes(e)),m=Object(r.a)(u,2),p=m[0],O=m[1];Object(c.useEffect)(Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,("/user/".concat(e),{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){d(e)})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)}))),[]);var x=function(){var t=Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/follow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({followId:e})}).then((function(e){return e.json()})).then((function(e){a({type:"UPDATE",payload:{followers:e.followers,following:e.following}}),localStorage.setItem("user",JSON.stringify(e)),d((function(t){return Object(j.a)(Object(j.a)({},t),{},{user:Object(j.a)(Object(j.a)({},t.user),{},{followers:[].concat(Object(L.a)(t.user.followers),[e._id])})})})),O(!0)})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),g=function(){var t=Object(b.a)(h.a.mark((function t(){return h.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,fetch("/unfollow",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({unfollowId:e})}).then((function(e){return e.json()})).then((function(e){a({type:"UPDATE",payload:{followers:e.followers,following:e.following}}),localStorage.setItem("user",JSON.stringify(e)),d((function(t){var n=t.user.followers.filter((function(t){return t!==e._id}));return Object(j.a)(Object(j.a)({},t),{},{user:Object(j.a)(Object(j.a)({},t.user),{},{followers:n})})})),O(!1)})).catch((function(e){console.log(e)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(_.jsx)(_.Fragment,{children:o?Object(_.jsxs)("div",{className:"profile",children:[Object(_.jsxs)("div",{className:"user-profile-container",children:[Object(_.jsx)("div",{className:"profile-img-container",children:Object(_.jsx)("img",{className:"profile-img",src:o.user.pic})}),Object(_.jsxs)("div",{className:"user-info-container",children:[Object(_.jsx)("h2",{className:"user-name",children:o.user.name}),Object(_.jsx)(f.a,{variant:"body2",component:"h6",children:Object(_.jsx)("h6",{children:o.user.email})}),Object(_.jsx)(f.a,{variant:"body2",color:"textSecondary",component:"h6",children:Object(_.jsxs)("div",{className:"user-info",children:[Object(_.jsxs)("h6",{children:[o.posts.length," posts"]}),Object(_.jsxs)("h6",{children:[o.user.followers.length," followers"]}),Object(_.jsxs)("h6",{children:[o.user.following.length," following"]})]})}),p?Object(_.jsx)("button",{className:"follow-btn",onClick:function(){return g()},children:"Unfollow"}):Object(_.jsx)("button",{className:"follow-btn",onClick:function(){return x()},children:"Follow"})]})]}),Object(_.jsx)("div",{className:"user-gallery-container",children:o.posts.map((function(e,t){return e.photo?Object(_.jsx)("img",{className:"gallery-img",src:e.photo,alt:e.title},e._id):null}))})]}):Object(_.jsx)("div",{className:F.a.root,children:Object(_.jsx)(P.a,{})})})}),Z=function(){var e=Object(c.useState)(null),t=Object(r.a)(e,2),n=t[0],a=t[1],s=function(e){a(e.currentTarget)},i=function(){a(null)},l=Object(c.useContext)(W),d=l.state,u=(l.dispatch,Object(c.useState)([])),m=Object(r.a)(u,2),w=m[0],C=m[1],A=Object(c.useState)(""),I=Object(r.a)(A,2),B=I[0],E=I[1],T=Object(c.useState)(""),z=Object(r.a)(T,2),F=z[0],P=z[1],J=Object(c.useState)(""),U=Object(r.a)(J,2),R=U[0],D=U[1];Object(c.useEffect)(Object(b.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/getfollowingpost",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){C(e.posts)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)}))),[]);var L=function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/".concat(n),{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:t})}).then((function(e){return e.json()})).then((function(e){var t=w.map((function(t){return t._id===e._id?Object(j.a)(Object(j.a)({},t),{},{likes:e.likes}):t}));C(t)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(b.a)(h.a.mark((function e(t,n){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/comment",{method:"put",headers:{"Content-Type":"application/json",Authorization:"Bearer "+localStorage.getItem("jwt")},body:JSON.stringify({postId:n,text:t})}).then((function(e){return e.json()})).then((function(e){var t=w.map((function(t){return t._id==e._id?Object(j.a)(Object(j.a)({},t),{},{comments:e.comments}):t}));C(t),E("")})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Z=function(){var e=Object(b.a)(h.a.mark((function e(t){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/deletepost/".concat(t),{method:"delete",headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){var t=w.filter((function(t){return t._id!==e._id}));C(t)})).catch((function(e){console.log(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(_.jsx)("div",{className:"home-container",children:Object(_.jsx)("div",{className:"posts-container",children:w.map((function(e,t){return Object(_.jsxs)(O.a,{className:"post-card",children:[Object(_.jsxs)("div",{className:"post-card-header",children:[Object(_.jsxs)("div",{className:"user-info",children:[Object(_.jsx)("img",{src:e.postedBy.pic,className:"post-user-profile",alt:"profile"}),Object(_.jsxs)("h5",{children:[Object(_.jsx)(o.b,{to:e.postedBy._id!==d._id?"/profile/"+e.postedBy._id:"/profile",children:e.postedBy.name}),Object(_.jsx)(f.a,{variant:"body2",color:"textSecondary",component:"p",children:Object(_.jsx)("span",{children:p()(e.createdAt).calendar()})})]})]}),e.postedBy._id==d._id&&Object(_.jsxs)("div",{children:[Object(_.jsx)("i",{"aria-controls":"simple-menu","aria-haspopup":"true",onClick:s,className:"bi bi-three-dots-vertical delete-button"}),Object(_.jsx)(x.a,{id:"simple-menu",anchorEl:n,keepMounted:!0,open:Boolean(n),onClose:i,children:Object(_.jsx)(g.a,{onClick:i,children:Object(_.jsx)("i",{className:"bi bi-trash",onClick:function(){Z(e._id)}})})})]})]}),e.photo?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsxs)("div",{className:"post-card-info",children:[Object(_.jsx)("h5",{children:e.title}),Object(_.jsx)(f.a,{variant:"body2",color:"textSecondary",component:"h6",children:Object(_.jsx)("h6",{children:e.body})})]}),Object(_.jsx)(v.a,{children:Object(_.jsx)("img",{src:e.photo})})]}):Object(_.jsx)(v.a,{className:"post-card-without-img",children:Object(_.jsxs)("div",{children:[Object(_.jsx)("h5",{children:e.title}),Object(_.jsx)(f.a,{variant:"body2",color:"textSecondary",component:"h6",children:Object(_.jsx)("h6",{children:e.body})})]})}),Object(_.jsxs)(N.a,{children:[Object(_.jsx)(f.a,{variant:"body2",color:"textSecondary",component:"h6",children:Object(_.jsxs)("h6",{children:[e.likes.length+e.haha.length+e.angry.length," reacts"]})}),Object(_.jsxs)("div",{className:"card-icons",children:[Object(_.jsx)("div",{children:Object(_.jsx)("button",{onClick:function(){e.likes.includes(d._id)?L(e._id,"unlike"):L(e._id,"likes")},children:e.likes.includes(d._id)?Object(_.jsx)("i",{className:"bi bi-heart-fill icons heart-icon"}):Object(_.jsx)("i",{className:"bi bi-heart icons heart-icon"})})}),Object(_.jsx)("button",{onClick:function(){e._id==R?(P(""),D("")):(P("increase-height"),D(e._id)),e.comments.length<1&&k.a.toast({html:"No comments yet!",classes:"#f44336 blue"})},children:e._id==R?Object(_.jsx)("i",{className:"bi bi-chat-fill icons"}):Object(_.jsx)("i",{className:"bi bi-chat icons"})})]}),Object(_.jsx)("div",{className:"comments-container ".concat(e._id==R?F:null),children:e.comments.map((function(e){return console.log(e),Object(_.jsxs)("div",{className:"comment-container",children:[Object(_.jsx)("img",{src:e.postedBy.pic,className:"post-user-profile"}),Object(_.jsxs)("div",{className:"name-comment-container",children:[Object(_.jsx)(f.a,{variant:"body2",component:"p",children:Object(_.jsx)("p",{style:{fontWeight:"600"},children:e.postedBy.name})}),Object(_.jsx)("h6",{className:"comment",children:e.text})]})]},e._id)}))}),Object(_.jsxs)("div",{className:"add-comment-container",children:[Object(_.jsx)(y.a,{className:"add-comment-input","aria-label":"empty textarea",placeholder:"Add a comment",value:B,onChange:function(e){return E(e.target.value)}}),Object(_.jsx)(S.a,{className:"post-comment-button",onClick:function(){B.length>0?M(B,e._id):k.a.toast({html:"Comment can't be blank",classes:"#f44336 blue"})}})]})]})]},t)}))})})},q=(n(125),Object(F.a)((function(e){return{root:{width:"100%"}}})),function(){var e=Object(c.useContext)(W),t=e.state,n=(e.dispatch,Object(c.useState)("")),a=Object(r.a)(n,2),s=a[0],i=a[1],l=Object(c.useState)([]),j=Object(r.a)(l,2),d=j[0],u=j[1],h=Object(c.useState)([]),b=Object(r.a)(h,2),m=b[0],p=b[1];Object(c.useEffect)((function(){fetch("/users",{headers:{Authorization:"Bearer "+localStorage.getItem("jwt")}}).then((function(e){return e.json()})).then((function(e){u(e)})).catch((function(e){console.log(e)}))}),[]);return Object(_.jsx)(_.Fragment,{children:d?Object(_.jsxs)("div",{className:"users-container",children:[Object(_.jsx)("input",{type:"text",placeholder:"Search users",value:s,onChange:function(e){return function(e){if(i(e),""!==s){var t=d.filter((function(e){return e.name.toLowerCase().includes(s.toLowerCase())||e.email.toLowerCase().includes(s.toLowerCase())}));p(t)}else u(d)}(e.target.value)}}),Object(_.jsx)("ul",{children:0==s?d.map((function(e){return Object(_.jsx)("div",{children:e._id==t._id?null:Object(_.jsx)(o.c,{to:"/profile/".concat(e._id),children:Object(_.jsxs)("div",{className:"search-user-container",children:[Object(_.jsx)("img",{src:e.pic}),Object(_.jsxs)("li",{children:[e.name,Object(_.jsx)(f.a,{variant:"body2",color:"textSecondary",component:"p",children:Object(_.jsx)("span",{children:e.email})})]})]})})})})):m.map((function(e){return Object(_.jsx)("div",{children:e._id==t._id?null:Object(_.jsx)(o.c,{to:"/profile/".concat(e._id),children:Object(_.jsxs)("div",{className:"search-user-container",children:[Object(_.jsx)("img",{src:e.pic}),Object(_.jsxs)("li",{children:[e.name,Object(_.jsx)(f.a,{variant:"body2",color:"textSecondary",component:"p",children:Object(_.jsx)("span",{children:e.email})})]})]})})})}))})]}):Object(_.jsx)("div",{className:F.a.root,children:Object(_.jsx)(P.a,{})})})}),W=Object(c.createContext)(),$=function(){var e=Object(l.e)(),t=Object(c.useContext)(W),n=(t.state,t.dispatch);return Object(c.useEffect)((function(){var t=JSON.parse(localStorage.getItem("user"));t?n({type:"USER",payload:t}):e.push("/signin")}),[]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(l.a,{path:"/signin",children:Object(_.jsx)(I,{})}),Object(_.jsx)(l.a,{path:"/signup",children:Object(_.jsx)(R,{})}),Object(_.jsx)(l.a,{exact:!0,path:"/",children:Object(_.jsx)(A,{})}),Object(_.jsx)(l.a,{exact:!0,path:"/profile",children:Object(_.jsx)(J,{})}),Object(_.jsx)(l.a,{path:"/createpost",children:Object(_.jsx)(D,{})}),Object(_.jsx)(l.a,{path:"/followingsposts",children:Object(_.jsx)(Z,{})}),Object(_.jsx)(l.a,{path:"/profile/:user_id",children:Object(_.jsx)(M,{})}),Object(_.jsx)(l.a,{path:"/users",children:Object(_.jsx)(q,{})})]})};var Y=function(){var e=Object(l.f)(),t=Object(c.useReducer)(d,null),n=Object(r.a)(t,2),a=n[0],s=n[1];return Object(_.jsx)("div",{className:"App",children:Object(_.jsxs)(W.Provider,{value:{state:a,dispatch:s},children:["/signup"==e.pathname||"/signin"==e.pathname?null:Object(_.jsx)(B,{className:"navbar-container"}),Object(_.jsx)($,{})]})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,165)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))};i.a.render(Object(_.jsx)(a.a.StrictMode,{children:Object(_.jsx)(o.a,{children:Object(_.jsx)(Y,{})})}),document.getElementById("root")),G()},61:function(e,t,n){},64:function(e,t,n){},73:function(e,t,n){},88:function(e,t,n){},89:function(e,t,n){}},[[126,1,2]]]);
//# sourceMappingURL=main.b667c409.chunk.js.map